* OPA192 (PSpice format - Tested With TopSPICE simulator)
********************************************
**  This file was created by TINA        **
**    (c) 1996-2006 DesignSoft, Inc.   **
********************************************


* OPA192 Rev A by Marek Lis; November 22, 2013


* This macromodel has been optimized to model the AC, DC, noise, and transient response performance within 
* the device data sheet specified limits. Correct operation of this macromodel has been verified on DesignSoft
* TINA Version 7.0.80.224 SF. For help with other analog simulation software, please consult the software supplier.
*
* Copyright 2011 by Texas Instruments Corporation
*
* BEGIN MODEL OPA192
*
*GREEN-LIS MACRO-MODEL SIMULATED FEATURES:
*
*OPEN LOOP GAIN AND PHASE VS FREQUENCY WITH RL AND CL EFFECTS
*INPUT COMMON MODE REJECTION WITH FREQUENCY
*POWER SUPPLY REJECTION WITH FREQUENCY
*INPUT IMPEDANCE VS FREQUENCY 
*OUTPUT IMPEDANCE VS FREQUENCY and OUTPUT CURRENT
*INPUT VOLTAGE NOISE VS FREQUENCY
*INPUT CURRENT NOISE VS FREQUENCY 
*OUTPUT VOLTAGE SWING VS OUTPUT CURRENT
*SHORT-CIRCUIT OUTPUT CURRENT
*QUIESCENT CURRENT VS SUPPLY VOLTAGE
*SETTLING TIME VS CAPACITIVE LOAD
*SLEW RATE
*SMALL SIGNAL OVERSHOOT VS CAPACITIVE LOAD
*LARGE SIGNAL RESPONSE
*OVERLOAD RECOVERY TIME
*INPUT BIAS CURRENT
*INPUT VOLTAGE OFFSET
*INPUT COMMON MODE RANGE
*OUTPUT CURRENT COMING THROUGH THE SUPPLY RAILS

.SUBCKT OPA192 +IN -IN V+ V- Vout
V7          19 63 100M
Vos         32 54 1U
V11         65 66 100M
V10         67 68 100M
V6          15 73 100
V5          74 15 100
V4          70 72 4
V1          71 69 4
V9          85 20 100M
IS2         V+ 32 5P
IS1         V+ V- 1M
IS3         59 V- -7P
V3          89 15 65
V2          15 90 65
R37         33 34 100MEG 
C6          35 33  1.00000000000000E-0016 IC=0 
C4          15 36 1N IC=0 
EVCVS1      14 15 11 37  -1
R38         36 38 10 
VCCVS2_in   37 12
HCCVS2      38 15 VCCVS2_in   1K
XU7         36 15 37 34 VC_RES_0
C25         14 35 2P IC=0 
C24         14 13 300N IC=0 
R32         13 35 62.5K 
R31         35 34 100MEG 
R30         14 35 500K 
EVCVS2      34 15 15 35  20MEG
R15         0 15 100MEG 
XR102       39 40 RNOISE_FREE_0
XR101       41 39 RNOISE_FREE_0
C1          39 0 1 IC=0 
EVCVS34     15 0 39 0  1
EVCVS29     41 0 V+ 0  1
EVCVS28     40 0 V- 0  1
SW13        14 13 15 16  S_VSWITCH_1
SW14        13 14 17 15  S_VSWITCH_2
XR105       18 15 RNOISE_FREE_1
XR105_2     42 15 RNOISE_FREE_0
R24         15 24 1K 
R17         15 25 1K 
R11         15 43 1K 
R10         15 44 1K 
R9          15 17 1K 
R8          15 16 1K 
*L4          15 15 17M IC=0 
L1          46 15 1F IC=0 
R2          46 47 1 
GVCCS8      15 47 15 48  1
XR109       49 15 RNOISE_FREE_0
C3          49 15 1F IC=0 
GVCCS4      15 49 29 15  1U
C2          50 15 1F IC=0 
XR109_2     50 15 RNOISE_FREE_2
GVCCS3      15 50 49 15  1M
R4          51 27 10M 
CinDiff     52 53 1.6P IC=0 
CinpCM      53 15 6.4P IC=0 
CinnCM      15 52 6.4P IC=0 
XIn11       54 52 FEMT_0
L2          55 15 1F IC=0 
XR109_3     29 15 RNOISE_FREE_0
XR109_4     56 15 RNOISE_FREE_0
XVn11       53 54 VNSE_0
XU14        57 15 58 59 VCVS_LIMIT_0
L3          60 15 1F IC=0 
Rcm2        55 57 1 
GVCCS2      15 57 15 61  1
XU13        19 62 IDEAL_D_0
EVCVS5      63 15 V- 15  1
C11         56 15 2F IC=0 
XR109_5     28 15 RNOISE_FREE_2
GVCCS12     15 29 56 15  1U
XU5         21 15 V+ 22 VCVS_LIMIT_1
XU6         15 21 23 V- VCVS_LIMIT_2
C15         V+ V- 10P IC=0 
C22         15 26 1P IC=0 
R29         26 18 1 
C23         15 30 1P IC=0 
C9          64 15 10P IC=0 
R26         64 21 10 
C21         15 17 1P IC=0 
C20         15 16 1P IC=0 
C19         24 15 1P IC=0 
C17         25 15 1P IC=0 
C16         15 43 1P IC=0 
C12         44 15 1P IC=0 
R13         11 30 1 
R36         30 68 1M 
R35         30 66 1M 
SW12        69 65 24 15  S_VSWITCH_3
SW11        67 70 15 25  S_VSWITCH_4
R34         30 71 1K 
R33         30 72 1K 
SW10        74 18 26 15  S_VSWITCH_5
SW9         18 73 15 26  S_VSWITCH_6
R25         75 24 1 
R19         76 25 1 
R16         77 43 1 
R14         78 44 1 
R12         79 17 1 
R7          80 16 1 
R5          81 28 10M 
R6          82 18 10M 
C13         28 15 1F IC=0 
GVCCS1      15 28 50 15  1M
GIsinking   V- 15 83 15  1M
GIsourcing  V+ 15 84 15  1M
R23         83 15 10K 
SW7         21 83 64 15  S_VSWITCH_7
R21         15 84 10K 
SW8         21 84 64 15  S_VSWITCH_8
SW4         82 79 17 15  S_VSWITCH_9
SW3         80 82 15 16  S_VSWITCH_10
XU3         70 31 80 15 VCVS_LIMIT_3
XU1         69 31 79 15 VCVS_LIMIT_3
SW2         51 75 24 15  S_VSWITCH_11
SW1         76 51 15 25  S_VSWITCH_12
XU8         32 V+ IDEAL_D_1
XU12        V- 32 IDEAL_D_1
EVCVS6      85 15 V+ 15  1
R22         86 62 100 
EVCVS4      86 15 32 15  1
XU2         62 20 IDEAL_D_0
SW6         81 77 43 15  S_VSWITCH_13
SW5         78 81 15 44  S_VSWITCH_14
XU26        62 59 15 87 VCCS_LIMIT_0
XU4         87 15 15 18 VCCS_LIMIT_1
LPSR        88 15 60M IC=0 
XVCVSPSRR   47 15 58 52 VCVS_LIMIT_4
XU22        89 21 76 15 VCVS_LIMIT_5
XU21        90 21 75 15 VCVS_LIMIT_5
XU20        23 Vout 77 15 VCVS_LIMIT_5
XU19        22 Vout 78 15 VCVS_LIMIT_6
XU11        V- 59 IDEAL_D_1
XU10        59 V+ IDEAL_D_1
C10         27 15 1F IC=0 
C5          29 15 2F IC=0 
XR109_6     27 15 RNOISE_FREE_2
GVCCS15     15 27 28 15  1M
GVCCS10     15 56 42 15  1U
R20         +IN 53 100 
R18         -IN 52 100 
GVCCS6      15 42 31 15  1U
XR105_3     31 15 RNOISE_FREE_0
XR103       15 87 RNOISE_FREE_0
RPSR        88 48 1 
GVCCS11     15 48 V+ V-  200N
Rcm1        60 61 1 
GVCCS7      15 61 32 15  500N
VCCVS1_in   12 Vout
HCCVS1      21 15 VCCVS1_in   1K
GVCCS5      15 31 18 15  1U
Ccc         18 15 20U IC=0 
EVCVS3      11 15 27 15  1
.MODEL S_VSWITCH_1 VSWITCH (RON=1 ROFF=100MEG VON=100M VOFF=-100M)
.MODEL S_VSWITCH_2 VSWITCH (RON=1 ROFF=100MEG VON=100M VOFF=-100M)
.MODEL S_VSWITCH_3 VSWITCH (RON=1 ROFF=10MEG VON=100M VOFF=-100M)
.MODEL S_VSWITCH_4 VSWITCH (RON=1 ROFF=10MEG VON=100M VOFF=-100M)
.MODEL S_VSWITCH_5 VSWITCH (RON=10M ROFF=100MEG VON=150 VOFF=130)
.MODEL S_VSWITCH_6 VSWITCH (RON=10M ROFF=100MEG VON=150 VOFF=130)
.MODEL S_VSWITCH_7 VSWITCH (RON=1M ROFF=10MEG VON=-10M VOFF=0)
.MODEL S_VSWITCH_8 VSWITCH (RON=1M ROFF=10MEG VON=10M VOFF=0)
.MODEL S_VSWITCH_9 VSWITCH (RON=1 ROFF=10MEG VON=1 VOFF=-1)
.MODEL S_VSWITCH_10 VSWITCH (RON=1 ROFF=10MEG VON=1 VOFF=-1)
.MODEL S_VSWITCH_11 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)
.MODEL S_VSWITCH_12 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)
.MODEL S_VSWITCH_13 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)
.MODEL S_VSWITCH_14 VSWITCH (RON=1 ROFF=1G VON=10 VOFF=-10)
.ENDS


*VOLTAGE CONTROLLED RESISTOR
.SUBCKT VC_RES_0  1      2      3    4
*              VC+    VC-   RES1 RES2
ERES 3 40 VALUE = {(I(VSENSE) * (ABS(V(1,2))*ABS(V(1,2))*0.000352-0.02359*ABS(V(1,2))+0.5922))*195000*24200*50*2/414500}
VSENSE 40 4 DC 0
.ENDS VC_RES_0 


* NOISELESS RESISTOR
.SUBCKT RNOISE_FREE_0  1 2
*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR
.PARAM ROHMS=1E6
ERES 1 3 VALUE = { I(VSENSE) * ROHMS }
RDUMMY 30 3 1
VSENSE 30 2 DC 0V
.ENDS RNOISE_FREE_0 


* NOISELESS RESISTOR
.SUBCKT RNOISE_FREE_1  1 2
*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR
.PARAM ROHMS=1E4
ERES 1 3 VALUE = { I(VSENSE) * ROHMS }
RDUMMY 30 3 1
VSENSE 30 2 DC 0V
.ENDS RNOISE_FREE_1 


* NOISELESS RESISTOR
.SUBCKT RNOISE_FREE_2  1 2
*ROHMS = VALUE IN OHMS OF NOISELESS RESISTOR
.PARAM ROHMS=1E3
ERES 1 3 VALUE = { I(VSENSE) * ROHMS }
RDUMMY 30 3 1
VSENSE 30 2 DC 0V
.ENDS RNOISE_FREE_2 


* BEGIN PROG NSE FEMTO AMP/RT-HZ 
.SUBCKT FEMT_0  1 2
* BEGIN SETUP OF NOISE GEN - FEMPTOAMPS/RT-HZ
* INPUT THREE VARIABLES
* SET UP INSE 1/F
* FA/RHZ AT 1/F FREQ
.PARAM NLFF=.001
* FREQ FOR 1/F VAL
.PARAM FLWF=0.001
* SET UP INSE FB
* FA/RHZ FLATBAND
.PARAM NVRF=0.001
* END USER INPUT
* START CALC VALS
.PARAM GLFF={PWR(FLWF,0.25)*NLFF/1164}
.PARAM RNVF={1.184*PWR(NVRF,2)}
.MODEL DVNF D KF={PWR(FLWF,0.5)/1E11} IS=1.0E-16
* END CALC VALS
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVNF
D2 8 0 DVNF
E1 3 6 7 8 {GLFF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNVF}
R5 5 0 {RNVF}
R6 3 4 1E9
R7 4 0 1E9
G1 1 2 3 4 1E-6
C1 1 0 1E-15
C2 2 0 1E-15
C3 1 2 1E-15
.ENDS
* END PROG NSE FEMTO AMP/RT-HZ


* BEGIN PROG NSE NANO VOLT/RT-HZ
.SUBCKT VNSE_0  1 2
* BEGIN SETUP OF NOISE GEN - NANOVOLT/RT-HZ
* INPUT THREE VARIABLES
* SET UP VNSE 1/F
* NV/RHZ AT 1/F FREQ
.PARAM NLF=85
* FREQ FOR 1/F VAL
.PARAM FLW=1
* SET UP VNSE FB
* NV/RHZ FLATBAND
.PARAM NVR=4.5
* END USER INPUT
* START CALC VALS
.PARAM GLF={PWR(FLW,0.25)*NLF/1164}
.PARAM RNV={1.184*PWR(NVR,2)}
.MODEL DVN D KF={PWR(FLW,0.5)/1E11} IS=1.0E-16
* END CALC VALS
I1 0 7 10E-3
I2 0 8 10E-3
D1 7 0 DVN
D2 8 0 DVN
E1 3 6 7 8 {GLF}
R1 3 0 1E9
R2 3 0 1E9
R3 3 6 1E9
E2 6 4 5 0 10
R4 5 0 {RNV}
R5 5 0 {RNV}
R6 3 4 1E9
R7 4 0 1E9
E3 1 2 3 4 1
C1 1 0 1E-15
C2 2 0 1E-15
C3 1 2 1E-15
.ENDS
* END PROG NSE NANOV/RT-HZ


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_0  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 1
.PARAM VPOS = 10M
.PARAM VNEG = -10M
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}
.ENDS VCVS_LIMIT_0 


*TG IDEAL DIODE
.SUBCKT IDEAL_D_0  A C
D1 A C DNOM
.MODEL DNOM D (TT=10P CJO=1E-18 IS=1E-15 RS=1E-3)
.ENDS IDEAL_D_0 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_1  VC+ VC- VOUT+ VOUT-
*              

E1 VOUT+ VOUT- TABLE {ABS(V(VC+,VC-))} = (0.0,0.018)(1.8,0.095)(9,0.43)(64.9,4.0)
.ENDS VCVS_LIMIT_1 



*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_2  VC+ VC- VOUT+ VOUT-
*              

E1 VOUT+ VOUT- TABLE {ABS(V(VC+,VC-))} = (0.0,0.018)(1.8,0.095)(9,0.43)(64.9,5.0)
.ENDS VCVS_LIMIT_2 



*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_3  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 100
.PARAM VPOS = 6000
.PARAM VNEG = -6000
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}
.ENDS VCVS_LIMIT_3 


*TG IDEAL DIODE
.SUBCKT IDEAL_D_1  A C
D1 A C DNOM 
.MODEL DNOM D (TT=10P CJO=1E-18 IS=1E-15 RS=1E-3)
.ENDS IDEAL_D_1 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_0  VC+ VC- IOUT+ IOUT-
*              
.PARAM GAIN = 1M
.PARAM IPOS = .5
.PARAM INEG = -.5
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIMIT_0 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCCS_LIMIT_1  VC+ VC- IOUT+ IOUT-
*              
.PARAM GAIN = 1.33
.PARAM IPOS = 400
.PARAM INEG = -400
G1 IOUT+ IOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),INEG,IPOS)}
.ENDS VCCS_LIMIT_1 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_4  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = -1
.PARAM VPOS = 10M
.PARAM VNEG = -10M
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}
.ENDS VCVS_LIMIT_4 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_5  VC+ VC- VOUT+ VOUT-
*              
.PARAM GAIN = 100
.PARAM VPOS = 5000
.PARAM VNEG = -5000
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}
.ENDS VCVS_LIMIT_5 


*VOLTAGE CONTROLLED SOURCE WITH LIMITS
.SUBCKT VCVS_LIMIT_6  VC+ VC- VOUT+ VOUT-
*             
.PARAM GAIN = 100
.PARAM VPOS = 5000
.PARAM VNEG = -5000
E1 VOUT+ VOUT- VALUE={LIMIT(GAIN*V(VC+,VC-),VNEG,VPOS)}
.ENDS VCVS_LIMIT_6 


.END
